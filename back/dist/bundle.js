(()=>{"use strict";var e={494:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(55),i=o(n(384)),a=n(136).Strategy,u=n(136).ExtractJwt;e.exports=function(e){e.use(new r.Strategy({usernameField:"email"},(function(e,t,n){i.default.findOne({email:e.toLowerCase()},(function(s,o){return s?n(s):o?o.password?void o.comparePassword(t,(function(e,t){return e?n(e):t?n(null,o):n(null,!1,{msg:"Invalid email or password."})})):n(null,!1,{msg:"Your account was registered using a sign-in provider. To enable password login, sign in using a provider, and then set a password under your user profile."}):n(null,!1,{msg:`Email ${e} not found.`})}))})));const t={jwtFromRequest:u.fromAuthHeaderAsBearerToken(),secretOrKey:process.env.JWT_SECRET};e.use(new a(t,((e,t)=>s(this,void 0,void 0,(function*(){try{console.log(e.id);const n=yield i.default.findById(e.id);return t(null,n||!1)}catch(e){if(e)return t(e,!1,{message:"Server Error"})}})))))}},125:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authController=void 0;const r=o(n(564)),i=o(n(511)),a=o(n(384)),u=o(n(184));n(344),n(142).config({path:"../config/.env"}),t.authController={postRegister:(e,t,n)=>s(void 0,void 0,void 0,(function*(){try{const n=new a.default(e.body),o=[];if(r.default.isEmail(e.body.email)||o.push({msg:"Please enter a valid email address."}),r.default.isLength(e.body.password,{min:8})||o.push({msg:"Password must be at least 8 characters long"}),e.body.password!==e.body.confirmPassword&&o.push({msg:"Passwords do not match"}),o.length)return t.status(400).json({validationErrors:o});const i=r.default.normalizeEmail(n.email,{gmail_remove_dots:!1});n.email=i;const d=(()=>{let e="";for(let t=0;t<=10;t++)e+=Math.floor(10*Math.random()+1);return e})();n.uniqueString=d;const l=yield n.save(),c=(e,t)=>s(void 0,void 0,void 0,(function*(){var n=u.default.createTransport({service:"Gmail",auth:{user:process.env.MAIL,pass:process.env.MAIL_PSW}});const s={from:"Sport Arena Managment <howyesno040@gmail.com>",to:e,subject:"Email confirmation",html:`Welcome to Sport Arena! Please follow the instructions and login after verifying your email. Click <a href=http://localhost:3500/api/verify/${t}> here </a> to verify your email.`};n.sendMail(s)}));c(n.email,d),t.status(200).json({savedUser:l,message:`User created, verification email sent to ${n.email}`})}catch(e){t.status(400).json(e)}})),verifyEmail:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=e.params.uniqueString,s=yield a.default.findOne({uniqueString:n});if(!s)return t.status(400).json("User not found");s.isVerified=!0,yield s.save(),t.status(200).json({message:"Account verified."})}catch(e){console.log(e)}})),postLogin:(e,t,n)=>s(void 0,void 0,void 0,(function*(){i.default.authenticate("local",{session:!1},(function(s,o){if(s)return n(s);e.logIn(o,{session:!1},(e=>{if(e)return n(e);t.status(200).json({token:o.generateJWT(),user:o})}))}))(e,t,n)}))}},644:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.classesController=void 0;const r=o(n(384)),{Sport:i,Reviews:a,ClassTime:u}=n(953),d=o(n(380));t.classesController={getSelectedSports:(e,t)=>s(void 0,void 0,void 0,(function*(){const n=e.query.sports.split(","),s=e.query.ageGroups.split(","),o={sport:1};for(let e in s)o[s[e]]=1;try{const e=yield i.find({sport:n},o);if(e)return t.status(200).json(e)}catch(e){console.log(e)}})),enrollOrUnenroll:(e,t)=>s(void 0,void 0,void 0,(function*(){try{if(!e.headers.authorization)return t.status(400).json({message:"Bad token"});const n=(0,d.default)(e.headers.authorization),s=e.params.sport,o=String(e.query.action);if(!o||"enroll"!=o&&"unenroll"!=o)return t.status(400).json({message:"Bad Request : Invalid argument (invalid request payload)"});if("enroll"===o){const e=yield r.default.findOne({_id:n}).lean();if(""!=e.sport1&&""!=e.sport2)return t.status(400).json({message:"You are already enrolled in two sports classes!"});if(e.sport1===s||e.sport2===s)return t.status(400).json({message:"You are already enrolled in this sport!"});let o=e.ageGroup;const a=o+".class_users";let u,d;if((yield i.findOne({sport:s}).lean())[o].class_users.length>=10)return t.status(400).json({message:"class already full"});u=yield i.findOneAndUpdate({sport:s},{$push:{[a]:n}},{new:!0}).lean(),""==e.sport1?d=yield r.default.findOneAndUpdate({_id:n},{sport1:s},{new:!0}).lean():""==e.sport2&&(d=yield r.default.findOneAndUpdate({_id:n},{sport2:s},{new:!0}).lean()),t.status(200).json({updatedSport:u,updatedUser:d})}if("unenroll"===o){const s=e.params.sport,o={_id:n},a=yield r.default.findOne({_id:n}).lean();let u;if(a.sport1==s)u={sport1:""};else{if(a.sport2!=s)return t.status(400).json({message:"Invalid request, you are not enrolled in this sport!"});u={sport2:""}}const d=yield r.default.findOneAndUpdate(o,u,{new:!0}).lean(),l=`${a.ageGroup}.class_users`,c=yield i.findOneAndUpdate({sport:s},{$pull:{[l]:n}},{new:!0});t.status(200).json({updatedSport:c,updatedUser:d})}}catch(e){console.log(e)}})),commentSport:(e,t)=>s(void 0,void 0,void 0,(function*(){try{if(!e.headers.authorization)return t.status(400).json({message:"Bad token"});const n=new a(e.body),s=(0,d.default)(e.headers.authorization);n.userid=s;const o=e.params.sport,r=yield i.findOneAndUpdate({sport:o},{$push:{reviews:n}},{new:!0});t.status(200).json(r)}catch(e){t.status(400).json({message:"Bad request!"})}})),getFeedbackAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n={sport:e.query.sport},s={reviews:1,sport:1},o=yield i.find(n,s).lean(),r=o[0].reviews;let a=0;for(let e in r)a+=r[e].grade;const u=a/r.length;t.status(200).json({response:o,avgGrade:u})}catch(e){console.log(e)}})),updateSportClassAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=new u(e.body),{sport:s,ageGroup:o,classSchedule:r}=e.query,a={sport:s},d={$set:{[o+"."+r]:n}},l=yield i.findOneAndUpdate(a,d,{new:!0}).lean();t.status(200).json(l)}catch(e){t.status(400).json(e)}}))}},470:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mockController=void 0;const r=o(n(384)),{Sport:i,ClassTime:a}=n(953);t.mockController={mockData:(e,t)=>s(void 0,void 0,void 0,(function*(){try{if("create"==e.params.type){const e=["Boxing","Basketball","Cycling","Baseball","Football","Fitness","Golf","Running","Swimming","Tennis","Triathlon","Volleyball"];for(let t in e)new i({sport:e[t],children:{t1:new a({day:"Monday",start:"08:00",end:"09:30"}),t2:new a({day:"Monday",start:"08:00",end:"09:30"}),t3:new a({day:"Monday",start:"08:00",end:"09:30"})},youth:{t1:new a({day:"Monday",start:"08:00",end:"09:30"}),t2:new a({day:"Monday",start:"08:00",end:"09:30"}),t3:new a({day:"Monday",start:"08:00",end:"09:30"})},youngAdults:{t1:new a({day:"Monday",start:"08:00",end:"09:30"}),t2:new a({day:"Monday",start:"08:00",end:"09:30"}),t3:new a({day:"Monday",start:"08:00",end:"09:30"})},adults:{t1:new a({day:"Monday",start:"08:00",end:"09:30"}),t2:new a({day:"Monday",start:"08:00",end:"09:30"}),t3:new a({day:"Monday",start:"08:00",end:"09:30"})}}).save();const n={firstName:"admin",lastName:"admin",email:"iness.gvoic@gmail.com",password:"admin123",ageGroup:"youth",sport1:"",sport2:"",isVerified:!0,isAdmin:!0},s={firstName:"Ines",lastName:"Gvoic",email:"igvoic.work@gmail.com",password:"12345678",ageGroup:"youth",sport1:"",sport2:"",isVerified:!0,isAdmin:!1},o=new r.default(n);yield o.save();const u=new r.default(s);return yield u.save(),t.status(200).json({message:"Mock creating completed."})}if("delete"==e.params.type)return yield i.deleteMany(),yield r.default.deleteMany(),t.status(200).json({message:"Mock deleting completed."})}catch(e){t.json(e)}}))}},244:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sportsController=void 0;const{Sport:o,ClassTime:r}=n(953);t.sportsController={getSportsAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{let n;if(e.query.sports){let t=e.query.sports.split(",");n=yield o.find({sport:t}).lean()}else n=yield o.find().lean();t.status(200).json(n)}catch(e){console.log(e)}}))}},718:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.usersController=void 0;const r=o(n(384)),{Sport:i}=n(953),a=n(185).Types.ObjectId;t.usersController={createUserAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=new r.default(e.body),s=yield n.save();t.status(200).json(s)}catch(e){t.status(400).json(e)}})),getUserAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=e.params.id,s=yield r.default.findOne({_id:n}).lean();t.status(200).json(s)}catch(e){console.log(e)}})),getAllUsersAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const e=yield r.default.find().lean();t.status(200).json(e)}catch(e){t.status(401),console.log(e)}})),updateUserAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n={_id:e.params.id},s=e.body,o=yield r.default.findOneAndUpdate(n,s,{new:!0});t.status(200).json(o)}catch(e){console.log(e)}})),deleteUserAsAdmin:(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=e.params.id,s=a(n),o=yield r.default.findOne({_id:n}).lean(),u=o.ageGroup+".class_users",d={$and:[{$or:[{sport:o.sport1},{sport:o.sport2}]},{userAgeClass:{$in:[s]}}]},l={$pull:{[u]:n}},c=(yield i.updateMany(d,l),yield r.default.deleteOne({_id:n}));t.status(200).json({deleteUser:c,message:"User deleted"})}catch(e){console.log(e)}}))}},380:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(344);t.default=e=>{try{const t=e.split(" ")[1];return s.verify(t,process.env.JWT_SECRET).id}catch(e){return!1}}},786:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(344),i=o(n(384)),a={verifyAdmin:(e,t,n)=>s(void 0,void 0,void 0,(function*(){const s=e.headers.authorization;if(!s)return t.status(401).json({message:"Unathorized access attempted"});const o=s.split(" ")[1],a=r.verify(o,process.env.JWT_SECRET);if(1!=(yield i.default.findOne({_id:a.id})).isAdmin)return t.status(403).json("Only admin has access to this page");n()})),verifyUser:(e,t,n)=>{const s=e.headers.authorization;if(!s)return t.status(401).json({message:"Only registered and verified users have access to this page"});const o=s.split(" ")[1];r.verify(o,process.env.JWT_SECRET,((s,o)=>{if(s)return t.status(403).json({message:"Bad token"});e.user=o,n()}))}};t.default=a},773:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};const o=n(136).Strategy,r=n(136).ExtractJwt,i=n(384);n(142).config({path:"./config/.env"});const a={jwtFromRequest:r.fromAuthHeaderAsBearerToken(),secretOrKey:process.env.JWT_SECRET};e.exports=e=>{e.use(new o(a,((e,t)=>s(void 0,void 0,void 0,(function*(){try{console.log(e.id);const n=yield i.findById(e.id);return t(null,n||!1)}catch(e){if(e)return t(e,!1,{message:"Server Error"})}})))))}},953:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(185)),a=new i.Schema({userid:{type:i.default.Schema.Types.ObjectId,ref:"Users"},comment:{type:String,required:!0,default:"Good class"},grade:{type:Number,required:!0,default:5}}),u=new i.Schema({day:{type:String,default:""},start:{type:String,default:""},end:{type:String,default:""}}),d=new i.Schema({sport:{type:String,required:!0},children:{class_users:{type:[{type:i.default.Schema.Types.ObjectId,ref:"Users"}]},t1:u,t2:u,t3:u},youth:{class_users:{type:[{type:i.default.Schema.Types.ObjectId,ref:"Users"}]},t1:u,t2:u,t3:u},youngAdults:{class_users:{type:[{type:i.default.Schema.Types.ObjectId,ref:"Users"}]},t1:u,t2:u,t3:u},adults:{class_users:{type:[{type:i.default.Schema.Types.ObjectId,ref:"Users"}]},t1:u,t2:u,t3:u},reviews:[a]}),l=i.default.model("SportsClasses",d),c=i.default.model("ClassFeedback",a),f=i.default.model("ClassTime",u);e.exports={Sport:l,Reviews:c,ClassTime:f}},384:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(n(185)),d=a(n(96)),l=n(344),c=new u.Schema({firstName:{type:String,required:!0},lastName:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},ageGroup:{type:String},sport1:{type:String,default:""},sport2:{type:String,default:""},isVerified:{type:Boolean,default:!1,required:!0},uniqueString:{type:String},isAdmin:{type:Boolean,default:!1}});c.pre("save",(function(e){return i(this,void 0,void 0,(function*(){try{this.password&&this.isModified("password")&&(this.password=yield d.default.hash(this.password,10)),e()}catch(e){console.log(e)}}))})),c.methods.comparePassword=function(e,t){d.default.compare(e,this.password,((e,n)=>{t(e,n)}))},c.methods.generateJWT=function(){const e=new Date;new Date(e).setDate(e.getDate()+60);let t={id:this._id,email:this.email,firstName:this.firstName,lastName:this.lastName};return l.sign(t,process.env.JWT_SECRET)},t.default=u.default.model("User",c)},111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(860),o=n(125),r=(0,s.Router)();r.post("/register",o.authController.postRegister),r.get("/register/verify/:uniqueString",o.authController.verifyEmail),r.post("/login",o.authController.postLogin),t.default=r},69:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(860),r=n(644),i=s(n(786)),a=(0,o.Router)();a.get("/",i.default.verifyUser,r.classesController.getSelectedSports),a.put("/:sport",i.default.verifyUser,r.classesController.enrollOrUnenroll),a.put("/",i.default.verifyAdmin,r.classesController.updateSportClassAsAdmin),a.get("/feedback",i.default.verifyAdmin,r.classesController.getFeedbackAsAdmin),a.put("/feedback/:sport",i.default.verifyUser,r.classesController.commentSport),t.default=a},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(860),o=n(470),r=(0,s.Router)();r.get("/:type",o.mockController.mockData),t.default=r},215:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(860),r=n(244),i=s(n(786)),a=(0,o.Router)();a.get("/",i.default.verifyAdmin,r.sportsController.getSportsAsAdmin),a.put("/"),a.post("/"),a.delete("/"),t.default=a},761:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(860),o=n(718),r=(0,s.Router)();r.get("/:id",o.usersController.getUserAsAdmin),r.get("/",o.usersController.getAllUsersAsAdmin),r.post("/",o.usersController.createUserAsAdmin),r.put("/:id",o.usersController.updateUserAsAdmin),r.delete("/:id",o.usersController.deleteUserAsAdmin),t.default=r},273:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(860)),i=n(185),a=o(n(111)),u=o(n(761)),d=o(n(977)),l=o(n(215)),c=o(n(511)),f=o(n(786)),p=o(n(9)),y=o(n(69)),v=n(582),h=(0,r.default)();h.use(v()),n(142).config({path:"./config/.env"}),n(494)(c.default),h.use(r.default.urlencoded({extended:!1})),h.use(r.default.json()),h.use(c.default.initialize()),n(773)(c.default);const m=process.env.DB_STRING||"";!function(){s(this,void 0,void 0,(function*(){try{yield(0,i.connect)(m),console.log("MongoDB Connected")}catch(e){console.log(e),process.exit(1)}}))}(),h.listen(process.env.PORT,(()=>{console.log(`Server is running at ${process.env.PORT}`),(0,p.default)(h,process.env.PORT)})),h.use("/",a.default),h.use("/sports",l.default),h.use("/classes",y.default),h.use("/users",f.default.verifyAdmin,u.default),h.use("/mock",d.default)},9:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(777)),r=s(n(948)),i=n(147);n(142).config({path:"config/.env"});const a={definition:{openapi:"3.0.0",info:{title:"REST API Docs",version:i.version},components:{securitySchemes:{bearerAuth:{type:"http",scheme:"bearer",bearerFormat:"JWT",adminToken:process.env.ADMIN_JWT,userToken:process.env.USER_JWT}}},security:[{bearerAuth:[]}]},apis:["routes/*.ts","models/*.ts"]},u=(0,o.default)(a);t.default=function(e,t){e.use("/docs",r.default.serve,r.default.setup(u)),e.get("docs.json",((e,t)=>{t.setHeader("Content-type","application/json"),t.send(u)})),console.log(`Docs available at http://localhost:${t}/docs`)}},96:e=>{e.exports=require("bcrypt")},582:e=>{e.exports=require("cors")},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},344:e=>{e.exports=require("jsonwebtoken")},185:e=>{e.exports=require("mongoose")},184:e=>{e.exports=require("nodemailer")},511:e=>{e.exports=require("passport")},136:e=>{e.exports=require("passport-jwt")},55:e=>{e.exports=require("passport-local")},777:e=>{e.exports=require("swagger-jsdoc")},948:e=>{e.exports=require("swagger-ui-express")},564:e=>{e.exports=require("validator")},147:e=>{e.exports=JSON.parse('{"name":"sport-project","version":"1.0.0","description":"","main":".dist/bundle.js","scripts":{"build:server":"webpack --config webpack.config.server.js","start":"node ./dist/bundle.js","test":"echo \\"Error: no test specified\\" && exit 1"},"proxy":"http://localhost:3500","keywords":[],"author":"","license":"ISC","dependencies":{"@types/bcrypt":"^5.0.0","@types/express":"^4.17.14","@types/jsonwebtoken":"^8.5.9","@types/jwt-simple":"^0.5.33","@types/node":"^18.11.11","@types/nodemailer":"^6.4.6","@types/passport":"^1.0.11","@types/passport-jwt":"^3.0.7","@types/passport-local":"^1.0.34","@types/passport-local-mongoose":"^6.1.1","@types/shelljs":"^0.8.11","@types/swagger-jsdoc":"^6.0.1","@types/swagger-ui-express":"^4.1.3","@types/validator":"^13.7.10","bcrypt":"^5.1.0","body-parser":"^1.20.1","connect-ensure-login":"^0.1.1","connect-mongo":"^4.6.0","cors":"^2.8.5","dotenv":"^16.0.3","express":"^4.18.2","jsonwebtoken":"^8.5.1","jwt-simple":"^0.5.6","mongodb":"^4.11.0","mongoose":"^6.7.0","nodemailer":"^6.8.0","npm-run-all":"^4.1.5","passport":"^0.6.0","passport-jwt":"^4.0.0","passport-local":"^1.0.0","passport-local-mongoose":"^7.1.2","swagger-jsdoc":"^6.2.5","swagger-ui-express":"^4.6.0","ts-loader":"^9.4.2","ts-node":"^10.9.1","typescript":"^4.9.3","validator":"^13.7.0","webpack":"^5.75.0","webpack-cli":"^5.0.1","webpack-node-externals":"^3.0.0"}}')}},t={};!function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}(273)})();